<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans" rel="stylesheet" />
    <title th:text="${invoiceInfo.title}"></title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Open+Sans');

        @page {
            size: A4;
            margin: 11mm 12mm 12mm 12mm;
        }

        body {
            width: 100%;
            margin: 0 auto;
            box-sizing: border-box;
            font-family: Tahoma, sans-serif;
        }

        .main {
            border-collapse: collapse;
        }

        .logo {
            object-fit: contain;
        }

        .block {
            width: 100%;
            page-break-inside: avoid;
        }

        .canceled {
            width: 100%;
            display: block;
            position: fixed;
            top: 40%;
            left: 0;
            border-radius: 3px;
            font-size: 140px;
            color: #ebeaea;
            transform: rotate(-45deg);
        }

        footer {
            width: 100%;
            height: 90px;
            position: fixed;
            bottom: 0;
            break-after: always;
        }

        @media print {
            .block {
                page-break-inside: avoid;
            }
        }
    </style>
</head>

<body>
    <table class="main">
        <tbody>
            <tr>
                <td>
                    <table class="block">
                        <tbody style="width: 100%;">
                            <tr style="width: 100%;">
                                <td style="width: 15%;">
                                    <Img src='logo.png' alt='logo' width='65px' height='45px' class="logo" />
                                </td>
                                <td style="width: 70%;">
                                    <div style="font-size: 10px; font-weight: bold;"
                                        th:text="${invoiceInfo.fiscalName}"></div>
                                    <div style="margin-top: 5px; font-size: 9px; color: #5f5f5f;"
                                        th:text="${invoiceInfo.rfc}">
                                    </div>
                                    <div style="margin-top: 10px; font-size: 8px; color: #5f5f5f;"
                                        th:text="${invoiceInfo.fiscalRegimen}">601 - General de Ley Personas Morales
                                    </div>
                                </td>
                                <td style="width: 15%; text-align: right;">
                                    <div style="font-size: 10px; color: #5f5f5f;">Factura</div>
                                    <div style="margin-top: 5px; font-size: 12px;  font-weight: bold; color: #292525;"
                                        th:text="${invoiceInfo.folio}">3118</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="block"
                        style="width: 100%; height: 45px; background-color: #edeef0; border-radius: 5px; margin-top: 10px; padding: 8px; box-sizing: border-box;">
                        <table>
                            <tbody>
                                <tr>
                                    <td style="font-size: 9px; font-weight: bold;"
                                        th:text="${invoiceInfo.receptorFiscalName}">
                                        Surtidora de Abarrotes
                                    </td>
                                    <td style="margin-left: 10px; font-size: 8px; color: #5f5f5f;"
                                        th:text="${invoiceInfo.receptorRfc}">
                                        SUR01022585A
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div style="width: 100%; font-size: 8px; color: #5f5f5f; margin-top: 5px;"
                            th:text="${invoiceInfo.receptorAddress}">
                            Independencia 100, Colonia Centro, Guadalajara, Jalisco, CP 44160
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="block"
                        style="width: 100%; height: 70px; background-color: #edeef0; border-radius: 5px; margin-top: 5px; padding: 8px; box-sizing: border-box;">
                        <table style="width: 100%;">
                            <thead style="font-size: 7px; font-weight: bold; color: #5f5f5f;">
                                <tr>
                                    <th style="width: 20%; text-align: start; font-size: 8px; font-weight: 600;">
                                        CFI Version 4.0
                                    </th>
                                    <th style="width: 30%; text-align: start;">Folio fiscal</th>
                                    <th style="width: 20%; text-align: start;">Número de serie del CSD</th>
                                    <th style="width: 20%; text-align: start;">Número de serie del SAT</th>
                                </tr>
                            </thead>
                            <tbody style="font-size: 7px; color: #5f5f5f; margin-top: 5px;">
                                <tr>
                                    <td></td>
                                    <td th:text="${invoiceInfo.uuid}">2bed8f8e-9b3c-4aed-b7ac-1c4ca200322b</td>
                                    <td th:text="${invoiceInfo.certSerialNumber}">00001000000507254491</td>
                                    <td th:text="${invoiceInfo.serialNumber}">00001000000503270882</td>
                                </tr>
                            </tbody>
                        </table>
                        <table style="width: 100%; margin-top: 7px;">
                            <thead style="font-size: 7px; font-weight: bold; color: #5f5f5f;">
                                <tr>
                                    <th style="width: 105px; text-align: start;">Fecha y hora de certificación</th>
                                    <th style="width: 135px; text-align: start;">Uso del CFDI</th>
                                    <th style="width: 90px; text-align: start;">Regimen fiscal</th>
                                    <th style="width: 90px; text-align: start;">Exportación</th>
                                </tr>
                            </thead>
                            <tbody style="font-size: 7px; color: #5f5f5f; margin-top: 5px;">
                                <tr>
                                    <td th:text="${invoiceInfo.timberDate}"></td>
                                    <td th:text="${invoiceInfo.usageCfdi}">2bed8f8e-9b3c-4aed-b7ac-1c4ca200322b</td>
                                    <td th:text="${invoiceInfo.invoiceFiscalRegimen}">00001000000507254491</td>
                                    <td>01 - No aplica</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <table class="block"
                        style="width: 100%; background-color: #edeef0; border-radius: 5px; margin-top: 5px; padding: 6px 8px; box-sizing: border-box; font-size: 8px; font-weight: 600;">
                        <thead>
                            <tr>
                                <th style="width: 15%; text-align: center;">Clave SAT</th>
                                <th style="width: 10%; text-align: center;">Cantidad</th>
                                <th style="width: 10%; text-align: center;">Unidad</th>
                                <th style="width: 35%; text-align: center;">Descripción</th>
                                <th style="width: 15%; text-align: center;">Precio Unitario</th>
                                <th style="width: 15%; text-align: center;">Importe</th>
                            </tr>
                        </thead>
                    </table>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="block"
                        style="width: 100%; height: 68px; font-size: 8px; padding: 5px; box-sizing: border-box; border-bottom: 1px solid #dee0e3;"
                        th:each="item : ${invoiceInfo.serviceProd}">
                        <table style="width: 100%;">
                            <tbody>
                                <tr style="vertical-align: top;">
                                    <td style="width: 15%; font-weight: bold;">
                                        <div th:text="${item.satKey}">39111500</div>
                                        <div style="color: #5f5f5f;" th:text="${item.systemKey}">LUMOBS115469</div>
                                    </td>
                                    <td style="width: 10%; font-weight: bold; text-align: center;"
                                        th:text="${item.quantity}">4.0</td>
                                    <td style="width: 10%;">
                                        <div style="width: 100%; font-weight: bold; text-align: center;"
                                            th:text="${item.unityKey}">
                                            H87
                                        </div>
                                        <div style="width: 100%; text-align: center; color: #5f5f5f;"
                                            th:text="${item.unityValue}">PZA</div>
                                    </td>
                                    <td style="width: 35%; color: #5f5f5f;" th:text="${item.description}">
                                        Avlite AV-OL-310-L810-S2C0-00- 20W LED Solar Self-Contained Obstruction Light -
                                        Red
                                    </td>
                                    <td style="width: 15%; font-weight: bold; text-align: center;"
                                        th:text="${item.unitPrice}">
                                        $ 28,000.00</td>
                                    <td style="width: 15%; font-weight: bold; text-align: right;"
                                        th:text="${item.importPrice}">$
                                        112,000.00</td>
                                </tr>
                            </tbody>
                        </table>
                        <table style="width: 100%; display: flex; margin-top: 7px; color: #5f5f5f;">
                            <tbody>
                                <tr>
                                    <td th:text="${item.taxType}">02 - Con Objeto de impuesto</td>
                                    <td style="padding-left: 5px; font-weight: bold;">Trasladados</td>
                                    <td style="padding-left: 5px; font-weight: bold;">IVA:</td>
                                    <td th:text="${item.ivaType}">002</td>
                                    <td style="font-weight: bold;">Base:</td>
                                    <td th:text="${item.ivaBase}">$112,000.00</td>
                                    <td style="font-weight: bold;" th:text="${item.ivaType} + ':'">
                                        Tasa:
                                    </td>
                                    <td th:text="${item.cuotaOrTasa}">16.0%</td>
                                    <td style="font-weight: bold;">Importe:</td>
                                    <td th:text="${item.taxImport}">$17,920.00</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <table class="block" style="width: 100%; margin-top: 5px; border-collapse: collapse;">
                        <tbody>
                            <tr style="vertical-align: top;">
                                <td style="width: 65%; font-size: 7px; color: #5f5f5f;">
                                    <div style="font-weight: bold;">Importe con letra:</div>
                                    <div style="margin-top: 5px; " th:text="${invoiceInfo.textImport}">
                                        CIENTO TREINTA Y SEIS MIL OCHOCIENTOS OCHENTA PESOS 00/100 M.N
                                    </div>
                                    <table style="border-collapse: collapse; margin-top: 10px;">
                                        <tbody>
                                            <tr>
                                                <td style="width: 50%; font-weight: bold;">Forma de pago</td>
                                                <td style="width: 50%; font-weight: bold;">Método de pago</td>
                                            </tr>
                                            <tr style="padding-top: 5px;">
                                                <td th:text="${invoiceInfo.payForm}">99 - Por definir</td>
                                                <td th:text="${invoiceInfo.payMethod}">
                                                    PPD - Pago en parcialidades o diferido
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </td>
                                <td style="width: 35%; font-size: 8px; font-weight: 600; padding-right: 0;">
                                    <table style="width: 100%; border-collapse: collapse; ">
                                        <tbody>
                                            <tr style="height: 15px; text-align: right;">
                                                <td style="width: 40%;">Subtotal</td>
                                                <td style="width: 60%;" th:text="${invoiceInfo.subtotal}">$ 118,000.00
                                                </td>
                                            </tr>
                                            <tr style="height: 15px; text-align: right;"
                                                th:if="${invoiceInfo.discount != null}">
                                                <td>Descuento</td>
                                                <td th:text="${invoiceInfo.discount}">$ 0.00</td>
                                            </tr>
                                            <tr style="height: 15px; text-align: right;"
                                                th:if="${!invoiceInfo.getConcatenatedIva().isEmpty()}"
                                                th:each="item: ${invoiceInfo.getConcatenatedIva()}">
                                                <td th:text="${item.tasaOCuota()}">IVA 16.0%</td>
                                                <td th:text="${item.total()}">$ 18,880.00</td>
                                            </tr>
                                            <tr style="height: 15px; text-align: right;"
                                                th:if="${invoiceInfo.iepsTotal != null}">
                                                <td>IEPS</td>
                                                <td th:text="${invoiceInfo.iepsTotal}">$ 0.00</td>
                                            </tr>
                                            <tr style="height: 15px; text-align: right;"
                                                th:if="${invoiceInfo.getRetiencionIvaTotal() != null}">
                                                <td>Retención IVA</td>
                                                <td th:text="${invoiceInfo.retiencionIvaTotal}">$ 0.00</td>
                                            </tr>
                                            <tr style="height: 15px; text-align: right;"
                                                th:if="${invoiceInfo.retencionIepsTotal != null}">
                                                <td>Retención ISR</td>
                                                <td th:text="${invoiceInfo.retencionIepsTotal}">$ 0.00</td>
                                            </tr>
                                            <tr
                                                style="height: 22px; text-align: right; align-items: center; background-color: #edeef0;">
                                                <td
                                                    style="border-bottom-left-radius: 5px; border-top-left-radius: 5px;">
                                                    Total
                                                </td>
                                                <td style="border-bottom-right-radius: 5px; border-top-right-radius: 5px; padding-right: 3px;"
                                                    th:text="${invoiceInfo.total}">
                                                    $ 136,880.00
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
            <tr>
                <td>
                    <table class="block"
                        style="width: 100%; margin-top: 5px; table-layout: fixed; border-collapse: collapse;">
                        <tbody style="vertical-align: top;">
                            <tr>
                                <td style="width: 75%; font-size: 5px; color: #5f5f5f;">
                                    <div style="font-size: 6px; font-weight: bold;">Sello Digital del CFDI</div>
                                    <div style="width: 100%; word-wrap: break-word;" th:text="${invoiceInfo.cfdiSeal}">
                                    </div>
                                    <div style="font-size: 6px; font-weight: bold; margin-top: 7px;">Sello del SAT</div>
                                    <div style="width: 100%; word-wrap: break-word;" th:text="${invoiceInfo.satSeal}">
                                    </div>
                                    <div style="font-size: 6px; font-weight: bold; margin-top: 7px;">
                                        Cadena original del complemento de certificación digital del SAT:
                                    </div>
                                    <div style="width: 100%; word-wrap: break-word;"
                                        th:text="${invoiceInfo.originalChain}">
                                    </div>
                                </td>
                                <td style="width: 25%; text-align: center;">
                                    <Img src='qr_code.png' alt='logo' width='110px' height='110px'
                                        style="margin-top: 5px;" />
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
        </tbody>
        <tfoot style="height: 90px;">
            <tr>
                <td></td>
            </tr>
        </tfoot>
    </table>
    <div class="canceled">
        CANCELADA
    </div>
    <footer>
        <div style="width: 100%; margin-top: 10px; font-size: 6px; text-align: justify;">
            <b>PAGARÉ.</b> POR EL PRESENTE PAGARE RECONOCEMOS DEBER Y NOS OBLIGAMOS A PAGAR SOLIDARIA Y
            MANCOMUNADAMENTE A LA ORDEN DE <span th:text="${invoiceInfo.fiscalName}"></span> EN ESTA CIUDAD DE
            ZAPOPAN, JALISCO O EN CUALQUIER OTRA QUE
            SE NOS REQUIERA EL DIA <span th:text="${invoiceInfo.date}"></span> PM, LA CANTIDAD DE <span
                th:text="${invoiceInfo.total}"></span> ( <span th:text="${invoiceInfo.textImport}"></span> M.N.),
            VALOR QUE HEMOS RECIBIDO A NUESTRA ENTERA SATISFACCION, DERIVADO
            DEL SUMIMISTRO DE MERCANCIAS QUE AMPARA LA FACTURA CUYO FOLIO SE RELACIONA AL CALCE. ESTE PAGARE CAUSARA
            INTERESES MORATORIOS DEL 5% MENSUAL, UNA VEZ VENCIDO, SOMETIENDOSE EL SUSCRIPTOR EXPRESAMENTE A LOS
            TRIBUNALES QUE EL ACREEDOR ELIJA Y RENUNCIANDO AL FUERO DE MI ACTUAL O FUTURO DOMICILIO. ESTE PAGARE ES
            MERCANTIL Y ESTA PROTEGIDO POR LA LEY GENERAL DE TITULOS Y OPERACIONES DE CREDITO EN SU ART. 173 PARTE
            FINAL
            Y ARTICULOS CORRELATIVOS POR NO SER PAGARE DOMICILIADO.
        </div>
        <table style="width: 100%; margin-top: 15px; table-layout: fixed; border-collapse: collapse; font-size: 6px;">
            <tbody>
                <tr>
                    <td style="width: 50%;">
                        <div th:text="${invoiceInfo.clientName}"></div>
                        <div th:text="${invoiceInfo.clientAddress}"></div>
                        <div th:text="DELEG"></div>
                        <div th:text="${invoiceInfo.folioAndDate}"></div>
                    </td>
                    <td style="width: 50%;">
                        <div>NOMBRE DEL SUSCRIPTOR</div>
                        <div style="height: 25px; border-bottom: 1px solid #dee0e3;"></div>
                    </td>
                </tr>
            </tbody>
        </table>
    </footer>
</body>

</html>